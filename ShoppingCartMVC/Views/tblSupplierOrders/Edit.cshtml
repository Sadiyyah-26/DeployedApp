@model ShoppingCartMVC.Models.tblSupplierOrder

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/signature_pad/1.3.5/signature_pad.min.js" integrity="sha512-kw/nRM/BMR2XGArXnOoxKOO5VBHLdITAW00aG8qK4zBzcLVZ4nzg7/oYCaoiwc8U9zrnsO9UHqpyljJ8+iqYiQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title> Confirm Stock Order</title>
    <style>
        .card {
            border: 2px solid #00ff90;
        }

        .flex-row {
            display: flex;
        }

        .wrapper {
            border: 1px solid #4b00ff;
            border-right: 0;
        }

        canvas#signature-pad {
            background: #fff;
            width: 100%;
            height: 100%;
            cursor: crosshair;
        }

        .clear-btn .clear {
            height: 100%;
            background: #4b00ff;
            border: 1px solid transparent;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
        }

        .clear-btn .clear {
            transform: rotate(0deg);
            display: block;
        }

        button#btnDelivered {
            cursor: pointer;
        }

        .popup .overlay {
            position: fixed;
            top: 0px;
            left: 0px;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.7);
            z-index: 1;
            display: none;
        }

        .popup .content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%) scale(0);
            background: #fff;
            width: 550px;
            height: 550px;
            z-index: 2;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .popup .close-btn {
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 20px;
            width: 30px;
            height: 30px;
            background: #222;
            color: #fff;
            font-size: 25px;
            font-weight: 600;
            line-height: 30px;
            text-align: center;
            border-radius: 50%;
        }

        .popup.active .overlay {
            display: block;
        }

        .popup.active .content {
            transition: all 300ms ease-in-out;
            transform: translate(-50%,-50%) scale(1);
        }


        .popup .delContent {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%) scale(0);
            background: #fff;
            width: 600px;
            height: 400px;
            z-index: 2;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .popup.active .delContent {
            transition: all 300ms ease-in-out;
            transform: translate(-50%,-50%) scale(1);
        }

        .form-group{
            text-align:center;
        }
    </style>
</head>
<br />

<script>
    function signPopup() {
        document.getElementById("sign-popup").classList.toggle("active");
    }
</script>

<h2 class="card-title" style="text-align:center"><u>Confirm Stock Order </u></h2>
<div class="col-sm-6 mx-auto">
    <div class="card">
        <div class="card-body">
            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()

                <div class="form-horizontal">

                    <hr />
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                    @Html.HiddenFor(model => model.OrderId)

                    <div class="form-group">
                        <b> Supplier: </b>@Html.DisplayFor(m => m.tblSupplier.Name)

                    </div>

                    <div class="form-group">
                        <b> Order Date:</b>

                        @Html.DisplayFor(model => model.OrderDate, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.OrderDate, "", new { @class = "text-danger" })

                    </div>

                    <div class="form-group">
                        <b> Total: R</b> @Html.DisplayFor(m => m.Total)

                    </div>

                    <div class="form-group">
                        <b> Product:</b> @Html.DisplayFor(m => m.TblProduct.P_Name)

                    </div>

                    <div class="form-group">
                        <b>  Qty To Order:</b> @Html.DisplayFor(m => m.QtyOrder)

                    </div>

                    <div class="card col-lg-7 grid-margin mx-auto">
                        <div class="card-body">
                            <div class="form-group">
                                <b> Update Order Status:</b>
                                <br />
                                <br />
                                <div class="col-md-10">
                                    <p>@Html.RadioButtonFor(s => s.sOrderStatus, "Successful") All Items Are In Order</p>
                                    <p>@Html.RadioButtonFor(s => s.sOrderStatus, "Unsuccessful") Not All Items In Order</p>
                                </div>
                                <br />
                                
                            </div>
                        </div>
                    </div>

                </div>
                <input type="submit" value="Confirm" class="btn btn-success" />
            }

            @*pop-up for customer signature*@
            <div class="popup" id="sign-popup">
                <div class="overlay"></div>
                <div class="content">
                    <div class="close-btn" onclick="signPopup()">&times;</div>
                    <h1>Confirm Delivery</h1>

                    <p>By signing I agree that I have received my Turbo Meals order.</p>

                    <p>
                        <div class="flex-row">
                            <div class="wrapper">
                                <canvas id="signature-pad" width="400" height="200"></canvas>
                            </div>
                            <div class="clear-btn">

                                <input type="button" value="Clear" id="clear" class="clear" />
                            </div>
                        </div>
                    </p>
                    <p> Signed by customer ....</p>
                    <br />
                    <p><input type="checkbox" id="driverCheck" checked />  E-sign) </p>

                    <br />

                    <input type="button" value="Order Received" class="btn btn-info" onclick="signPopup()" />
                </div>

            </div>
            <br />
            <br />
            <div class="form-group">
                <input type="button" onclick="signPopup()" value=" Sign " class="btn btn-info" />
            </div>

            @*<div>
            @Html.ActionLink("Back to List", "Index")
        </div>*@
        </div>
            </div>
</div>

<br />
<br />
<br />

@*script for customer signature*@
<script>
    var canvas = document.getElementById("signature-pad");

    function resizeCanvas() {
        var ratio = Math.max(window.devicePixelRatio || 1, 1);
        canvas.width = canvas.offsetWidth * ratio;
        canvas.height = canvas.offsetHeight * ratio;
        canvas.getContext("2d").scale(ratio, ratio);
    }
    window.onresize = resizeCanvas;
    resizeCanvas();

    var signaturePad = new SignaturePad(canvas, {
        backgroundColor: 'rgb(250,250,250)'
    });

    document.getElementById("clear").addEventListener('click', function () {
        signaturePad.clear();
    })

</script>
